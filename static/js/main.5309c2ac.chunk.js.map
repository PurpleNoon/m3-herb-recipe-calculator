{"version":3,"sources":["libs/herbEffects.ts","libs/herbs.ts","libs/herbRecipeCalculate.ts","components/HerbRecipeCalculator.tsx","App.tsx","reportWebVitals.js","index.tsx"],"names":["herbEffects","name","description","sampleDescription","tags","herbs","color","effects","calculateHerbRecipeEffects","herbRecipe","specialEffectMapWithLv","recipe","specialEffectMap","countBy","herb","length","Object","entries","specialEffect","weight","effectLv","Math","floor","time","lv","min","getSpecialEffectMapWithLv","normalEffectMapWithLv","normalEffectMap","flatten","map","slice","effectName","getNormalEffectMapWithLv","potionTime","improveLv","keys","reduce","total","normalEffect","max","targetEffectTagSortOrderMap","正面效果","其他效果","负面效果","targetEffectTagSorter","a","b","avoidEffectTagSortOrderMap","avoidEffectTagSorter","herbRecipeResultSorter","getPotionMaxEffectLv","potion","values","sum","numbers","num","getPotionAllEffectLv","potionMaxEffectDiff","Option","Select","OptGroup","layout","labelCol","span","wrapperCol","tailLayout","offset","herbEffectTagSet","allHerbEffects","herbEffectWithTags","herbEffect","filter","herbEffectTag","includes","herbTag","groupBy","herbEffectWithTag","getHerbEffectTagSet","HerbRecipeCalculator","useState","targetEffects","avoidEffects","topCount","searchForm","Form","useForm","form","herbRecipeResult","setHerbRecipeResult","targetHerbEffectsOptions","sort","label","value","avoidHerbEffectsOptions","style","margin","width","initialValues","onFinish","console","log","herbRecipes","top","notice","aimHerbs","Boolean","intersection","combinationsWithReplacement","validHerbRecipes","every","potionEffect","sortedValidHerbRecipes","findHerbRecipe","textAlign","Item","rules","required","message","mode","allowClear","tagRender","renderProps","closable","onClose","onMouseDown","event","preventDefault","stopPropagation","marginRight","keyboard","type","htmlType","listStyleType","herbRecipeInfo","herbName","index","String","effect","marginLeft","join","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5309c2ac.chunk.js","sourcesContent":["const herbEffects = [\n  {\n    name: '急迫',\n    description: `方块挖掘速度提升(等级x20%)，攻击速度提升(等级x10%)，玩家的手臂挥动得更快`,\n    sampleDescription: `挖掘速度提升`,\n    tags: ['正面效果', '原版'],\n  },\n  {\n    name: '防火',\n    description: `获得对火、熔岩、烈焰人火球冲击与岩浆块效果的免疫`,\n    sampleDescription: `免疫火焰伤害`,\n    tags: ['正面效果', '原版'],\n  },\n  {\n    name: '力量',\n    description: `力量buff可以提高玩家的近战伤害。\\n带有该buff的玩家将提升0.3*（物理攻击力+武器面板）的近战伤害。\\n物理远程伤害及魔法伤害则不受影响。`,\n    sampleDescription: `提升近战伤害`,\n    tags: ['正面效果', '魔法金属', '机制重写'],\n  },\n  {\n    name: '缓慢',\n    description: `缩小视野\\n每等级速度减慢15%`,\n    sampleDescription: `移动速度降低`,\n    tags: ['负面效果', '原版'],\n  },\n  {\n    name: '药水时间缩短7分',\n    description: ``,\n    sampleDescription: ``,\n    tags: ['其他效果', '魔法金属'],\n  },\n  {\n    name: '速度',\n    description: `增加视野，每等级移动速度提升20%。`,\n    sampleDescription: `提高移动速度`,\n    tags: ['正面效果', '原版'],\n  },\n  {\n    name: '水下呼吸',\n    description: `氧气条在水下不会减少并且在水下的视野变好`,\n    sampleDescription: `水下不消耗氧气`,\n    tags: ['正面效果', '原版'],\n  },\n  {\n    name: '冰缓',\n    description: `这个效果将导致玩家体温下降，每5秒额外降低3点。`,\n    sampleDescription: `体温持续下降`,\n    tags: ['负面效果', '魔法金属'],\n  },\n  {\n    name: '魔导',\n    description: `在拥有此效果时，造成的魔法伤害+30%。`,\n    sampleDescription: `提高魔法伤害`,\n    tags: ['正面效果', '魔法金属'],\n  },\n  {\n    name: '跳跃提升',\n    description: `允许玩家跳得更高，每等级增加0.75米的跳跃能力，并且每等级减少1点摔落伤害。`,\n    sampleDescription: `提高跳跃力`,\n    tags: ['正面效果', '原版'],\n  },\n  {\n    name: '夜视',\n    description: `在视觉上提升亮度至14级，以提升黑暗中的视野亮度，最后10秒会闪烁。实际光照不变。`,\n    sampleDescription: `提升黑暗中视野亮度`,\n    tags: ['正面效果', '原版'],\n  },\n  {\n    name: '感性',\n    description: `持有此效果时，增加7.14%的职业经验获取。`,\n    sampleDescription: `提高职业经验获得量`,\n    tags: ['正面效果', '魔法金属'],\n  },\n  {\n    name: '诅咒',\n    description: `被诅咒时，造成的伤害降低，受到的伤害提高。`,\n    sampleDescription: `受到伤害提高，造成伤害降低`,\n    tags: ['负面效果', '魔法金属'],\n  },\n  {\n    name: '药水等级下降1级',\n    description: ``,\n    sampleDescription: ``,\n    tags: ['其他效果', '魔法金属'],\n  },\n  {\n    name: '生命恢复',\n    description: `每50刻（=2.5秒）恢复1点生命值，每等级恢复间隔减半。`,\n    sampleDescription: `每秒回复生命值`,\n    tags: ['正面效果', '原版'],\n  },\n  {\n    name: '看穿',\n    description: `提高5点穿透值。\\n持有此buff时能看到天空守护龙召唤的真理水晶。`,\n    sampleDescription: `提高穿透值`,\n    tags: ['正面效果', '魔法金属'],\n  },\n  {\n    // 出血和伤口是一个效果\n    name: '伤口',\n    description: `在拥有此效果时，无法受到治疗效果，如生命自然回复、竖琴治疗、吸血等效果。\\n食用料理回血、使用地下城补血站仍然有效。\\n被持有二转被动的剑斗士攻击时增加40%受到的伤害`,\n    sampleDescription: `无法回复生命值`,\n    tags: ['负面效果', '魔法金属'],\n  },\n  {\n    name: '药水等级提升1级',\n    description: ``,\n    sampleDescription: ``,\n    tags: ['其他效果', '魔法金属'],\n  },\n  {\n    name: '抗性提升',\n    description: `带有抗性提升buff的玩家将提高12点防御力，无论该buff的等级是多少。`,\n    sampleDescription: `降低受到的伤害`,\n    tags: ['正面效果', '魔法金属', '机制重写'],\n  },\n  {\n    name: '虚弱',\n    description: `每级虚弱状态将降低玩家0.5点物理近战伤害，过高等级的虚弱状态将使玩家无法造成近战伤害。\\n这个状态也会影响玩家空手攻击，带有2级虚弱的玩家空手攻击将没有任何效果，也无法击退。\\n物理远程伤害与魔法伤害则不受影响。`,\n    sampleDescription: `降低物理近战伤害`,\n    tags: ['负面效果', '魔法金属', '机制重写'],\n  },\n  {\n    name: '魔药',\n    description: `在拥有此效果时，造成的伤害+15%。`,\n    sampleDescription: `提高造成的伤害`,\n    tags: ['正面效果', '魔法金属'],\n  },\n  {\n    name: '药水时间提升8分',\n    description: ``,\n    sampleDescription: ``,\n    tags: ['其他效果', '魔法金属'],\n  },\n  {\n    name: '箭术',\n    description: `持有此效果时，提高30%物理远程伤害。`,\n    sampleDescription: `提高物理远程伤害`,\n    tags: ['正面效果', '魔法金属'],\n  },\n  {\n    name: '贪婪',\n    description: `在拥有此效果时，掉宝率提高30%。\\n击杀魔物的时候掉落更多的货币。\\n5.5.1版本及以前，贪婪效果的掉宝率提升为20%。`,\n    sampleDescription: `提高掉宝率`,\n    tags: ['正面效果', '魔法金属'],\n  },\n  {\n    name: '凋零',\n    description: `每40刻（即2秒）给予1点伤害。`,\n    sampleDescription: `持续受到伤害`,\n    tags: ['负面效果', '原版'],\n  },\n  {\n    name: '迅捷',\n    description: `持有此效果时，提高回避率。`,\n    sampleDescription: `大幅提高回避率`,\n    tags: ['正面效果', '魔法金属'],\n  },\n  {\n    name: '铁皮',\n    description: `持有此效果时，提高12点防御力。`,\n    sampleDescription: `提高防御力`,\n    tags: ['正面效果', '魔法金属'],\n  },\n  {\n    name: '精确',\n    description: `拥有此效果时，暴击率提高10点。`,\n    sampleDescription: `大幅提高暴击率`,\n    tags: ['正面效果', '魔法金属'],\n  },\n  {\n    name: '幸运',\n    description: `持有此效果时，能获得更多的生产经验。`,\n    sampleDescription: `提高生产经验获得量`,\n    tags: ['正面效果', '魔法金属'],\n  },\n  {\n    name: '失手',\n    description: `攻击时有一定概率失手而攻击无效化。通俗讲就是命中降低`,\n    sampleDescription: `攻击时有概率打空`,\n    tags: ['负面效果', '魔法金属'],\n  },\n  {\n    name: '中毒',\n    description: `每 25 刻（= 1.25 秒）给予 1 点伤害，每等级伤害间隔减半（数值取整）`,\n    sampleDescription: `持续受到伤害`,\n    tags: ['负面效果', '原版'],\n  },\n  {\n    name: '毅力',\n    description: `持有此效果时，死亡后不会掉落xp和货币。`,\n    sampleDescription: `死亡时不掉落货币和经验`,\n    tags: ['正面效果', '魔法金属'],\n  },\n  {\n    name: '饥饿',\n    description: `导致饥饿值更快的消耗，每刻减少 0.005 × 等级 的饥饿值，换言之每秒减少 0.1 × 等级 的饥饿值。`,\n    sampleDescription: `更快更容易消耗饱食度`,\n    tags: ['负面效果', '原版'],\n  },\n  {\n    name: '甜蜜',\n    description: `持有此效果时，每5秒的生命恢复量变为两倍，穿透值+3，暴击伤害+20%。\\n5.6.5版本前，甜蜜效果为提高生命恢复速度。`,\n    sampleDescription: `提高生命恢复`,\n    tags: ['正面效果', '魔法金属'],\n  },\n  {\n    name: '脱水',\n    description: `在拥有此效果时，每5秒额外减少50点水量。`,\n    sampleDescription: `水量不断减少`,\n    tags: ['负面效果', '魔法金属'],\n  },\n  {\n    name: '甜点',\n    description: `在拥有此效果时，暴击/回避+8，造成的伤害+10%，暴击伤害+20%。\\n5.6.5-2以前的效果为：造成的伤害+10%，暴击率+8，回避率+8。`,\n    sampleDescription: `提高暴击率与回避率`,\n    tags: ['正面效果', '魔法金属'],\n  },\n  {\n    name: '剧毒',\n    description: `拥有该效果时，每5秒受到最大生命值30%的伤害。该伤害无法被闪避，不受防御力减免，但“受到伤害-%”有减`,\n    sampleDescription: `持续受到大量伤害`,\n    tags: ['负面效果', '魔法金属'],\n  },\n  {\n    name: '随机效果',\n    description: ``,\n    sampleDescription: ``,\n    tags: ['其他效果', '魔法金属'],\n  },\n];\n\nexport interface HerbEffect {\n  name: string;\n  description: string;\n  sampleDescription: string;\n  tags: string[];\n}\n\nexport default herbEffects;\n","const herbs = [\n  {\n    name: '烈焰花',\n    color: '黄色',\n    effects: ['急迫', '防火', '力量', '缓慢', '药水时间缩短7分'],\n  },\n  {\n    name: '水灵草',\n    color: '黄色',\n    effects: ['速度', '水下呼吸', '冰缓', '魔导', '药水时间缩短7分'],\n  },\n  {\n    name: '夜光草',\n    color: '黄色',\n    effects: ['跳跃提升', '夜视', '感性', '诅咒', '药水等级下降1级'],\n  },\n  {\n    name: '寒冰玫瑰',\n    color: '蓝色',\n    effects: ['生命恢复', '冰缓', '看穿', '伤口', '药水等级提升1级'],\n  },\n  {\n    name: '萤光草',\n    color: '黄色',\n    effects: ['抗性提升', '急迫', '虚弱', '魔药', '药水时间提升8分'],\n  },\n  {\n    name: '深红香茅',\n    color: '红色',\n    effects: ['防火', '生命恢复', '伤口', '力量', '药水等级提升1级'],\n  },\n  {\n    name: '龙舌兰草',\n    color: '绿色',\n    effects: ['水下呼吸', '箭术', '看穿', '诅咒', '药水等级下降1级'],\n  },\n  {\n    name: '火焰荆棘',\n    color: '黑色',\n    effects: ['夜视', '防火', '魔药', '抗性提升', '药水等级下降1级'],\n  },\n  {\n    name: '死亡花',\n    color: '黑色',\n    effects: ['贪婪', '生命恢复', '箭术', '凋零', '药水时间提升8分'],\n  },\n  {\n    name: '祝福之心',\n    color: '红色',\n    effects: ['迅捷', '生命恢复', '铁皮', '抗性提升', '药水时间缩短7分'],\n  },\n  {\n    name: '深红草',\n    color: '红色',\n    effects: ['精确', '贪婪', '迅捷', '伤口', '药水等级提升1级'],\n  },\n  {\n    name: '圣光花',\n    color: '黄色',\n    effects: ['箭术', '贪婪', '防火', '迅捷', '药水等级下降1级'],\n  },\n  {\n    name: '影子草',\n    color: '黑色',\n    effects: ['魔导', '凋零', '幸运', '抗性提升', '药水时间提升8分'],\n  },\n  {\n    name: '冰雪花',\n    color: '蓝色',\n    effects: ['看穿', '冰缓', '精确', '魔药', '药水时间提升8分'],\n  },\n  {\n    name: '痛苦草',\n    color: '红色',\n    effects: ['感性', '伤口', '精确', '魔药', '药水等级提升1级'],\n  },\n  {\n    name: '诅咒花',\n    color: '红色',\n    effects: ['感性', '伤口', '精确', '魔药', '药水等级下降1级'],\n  },\n  {\n    name: '黄金蕨',\n    color: '黄色',\n    effects: ['铁皮', '贪婪', '幸运', '失手', '药水等级下降1级'],\n  },\n  {\n    name: '蓝晶花',\n    color: '蓝色',\n    effects: ['幸运', '急迫', '夜视', '失手', '药水时间提升8分'],\n  },\n  {\n    name: '紫玫瑰',\n    color: '蓝色',\n    effects: ['看穿', '中毒', '力量', '箭术', '药水等级下降1级'],\n  },\n  {\n    name: '火猝花',\n    color: '黄色',\n    effects: ['速度', '防火', '跳跃提升', '迅捷', '药水时间提升8分'],\n  },\n  {\n    name: '魔凝雏',\n    color: '白色',\n    effects: ['跳跃提升', '魔导', '伤口', '跳跃提升', '药水时间提升8分'],\n  },\n  {\n    name: '凋零玫瑰',\n    color: '黑色',\n    effects: ['生命恢复', '凋零', '箭术', '力量', '药水时间提升8分'],\n  },\n  {\n    name: '诡异菌',\n    color: '蓝色',\n    effects: ['抗性提升', '夜视', '水下呼吸', '跳跃提升', '药水等级下降1级'],\n  },\n  {\n    name: '黄金玫瑰',\n    color: '黄色',\n    effects: ['铁皮', '贪婪', '防火', '缓慢', '药水时间缩短7分'],\n  },\n  {\n    name: '葡萄藤',\n    color: '绿色',\n    effects: ['毅力', '饥饿', '急迫', '速度', '药水时间提升8分'],\n  },\n  {\n    name: '水月花',\n    color: '蓝色',\n    effects: ['水下呼吸', '水下呼吸', '夜视', '冰缓', '药水时间提升8分'],\n  },\n  {\n    name: '紫月蕨',\n    color: '蓝色',\n    effects: ['贪婪', '中毒', '伤口', '铁皮', '药水等级提升1级'],\n  },\n  {\n    name: '噩梦草',\n    color: '黑色',\n    effects: ['迅捷', '失手', '魔药', '魔导', '药水等级下降1级'],\n  },\n  {\n    name: '矢车菊',\n    color: '蓝色',\n    effects: ['精确', '魔导', '急迫', '跳跃提升', '药水时间提升8分'],\n  },\n  {\n    name: '白月花',\n    color: '白色',\n    effects: ['箭术', '速度', '铁皮', '幸运', '药水等级下降1级'],\n  },\n  {\n    name: '管藤',\n    color: '绿色',\n    effects: ['魔导', '感性', '失手', '伤口', '药水时间提升8分'],\n  },\n  {\n    name: '咒术疣',\n    color: '黑色',\n    effects: ['魔药', '毅力', '铁皮', '凋零', '药水等级提升1级'],\n  },\n  {\n    name: '羊肚菌',\n    color: '红色',\n    effects: ['防火', '魔导', '甜蜜', '脱水', '感性', '药水时间缩短7分'],\n  },\n  {\n    name: '松茸',\n    color: '红色',\n    effects: ['水下呼吸', '力量', '甜点', '虚弱', '毅力', '药水时间提升8分'],\n  },\n  {\n    name: '松乳菇',\n    color: '黄色',\n    effects: ['夜视', '箭术', '甜点', '冰缓', '铁皮', '药水时间提升8分'],\n  },\n  {\n    name: '牛肝菌',\n    color: '白色',\n    effects: ['贪婪', '急迫', '甜蜜', '伤口', '幸运', '药水等级提升1级'],\n  },\n  {\n    name: '毒蝇伞',\n    color: '红色',\n    effects: ['魔导', '力量', '箭术', '剧毒', '看穿', '药水等级下降1级'],\n  },\n  {\n    name: '墨汁鬼伞',\n    color: '蓝色',\n    effects: ['速度', '防火', '迅捷', '急迫', '毅力', '药水时间缩短7分'],\n  },\n  {\n    name: '环柄菇',\n    color: '白色',\n    effects: [\n      '力量',\n      '甜蜜',\n      '抗性提升',\n      '跳跃提升',\n      '铁皮',\n      '药水时间提升8分',\n    ],\n  },\n  {\n    name: '蜜环菌',\n    color: '黄色',\n    effects: [\n      '生命恢复',\n      '迅捷',\n      '跳跃提升',\n      '诅咒',\n      '幸运',\n      '药水时间缩短7分',\n    ],\n  },\n  {\n    name: '鸡油菌',\n    color: '黄色',\n    effects: ['精确', '迅捷', '魔药', '失手', '看穿', '药水等级下降1级'],\n  },\n  {\n    name: '紫丁香蘑',\n    color: '蓝色',\n    effects: ['急迫', '随机效果', '箭术', '中毒', '看穿', '药水等级提升1级'],\n  },\n  {\n    name: '秀珍菇',\n    color: '黑色',\n    effects: [\n      '生命恢复',\n      '随机效果',\n      '魔药',\n      '凋零',\n      '幸运',\n      '药水时间缩短7分',\n    ],\n  },\n  {\n    name: '绿褶菇',\n    color: '黄色',\n    effects: ['魔药', '精确', '甜蜜', '速度', '铁皮', '药水等级下降1级'],\n  },\n  {\n    name: '橘黄裸伞',\n    color: '黄色',\n    effects: ['魔导', '精确', '水下呼吸', '缓慢', '毅力', '药水时间提升8分'],\n  },\n  {\n    name: '花菇',\n    color: '红色',\n    effects: ['箭术', '生命恢复', '力量', '饥饿', '感性', '药水等级提升1级'],\n  },\n  {\n    name: '粉褶菌',\n    color: '蓝色',\n    effects: [\n      '随机效果',\n      '生命恢复',\n      '甜蜜',\n      '虚弱',\n      '毅力',\n      '药水等级下降1级',\n    ],\n  },\n  {\n    name: '毒鹅膏',\n    color: '白色',\n    effects: ['抗性提升', '防火', '箭术', '剧毒', '铁皮', '药水时间提升8分'],\n  },\n];\n\nexport interface HerbInfo {\n  name: string;\n  color: string;\n  effects: string[];\n}\n\n// class Herb {\n//   name: string = '';\n\n//   color: string = '';\n\n//   effects: string[] = [];\n\n//   constructor({ name, color, effects }: HerbInfo) {\n//     this.name = name;\n//     this.color = color;\n//     this.effects = effects;\n//   }\n\n//   get special() {\n//     return this.effects[this.effects.length - 1];\n//   }\n// }\n\nexport default herbs;\n","import { intersection, countBy, flatten, groupBy } from 'lodash';\nimport { combinationsWithReplacement } from '@shlappas/itertools';\nimport type { HerbEffect } from '../libs/herbEffects';\n// import herbEffects from '@/libs/herbEffects';\nimport herbs from '../libs/herbs';\nimport type { HerbInfo } from '../libs/herbs';\n\n// const herbEffectsSet = keyBy(herbEffects, 'name');\n// const herbSet = keyBy(herbs, 'name');\nexport interface Potion {\n  time: number;\n  effects: Record<string, number>;\n}\n\nconst getSpecialEffectMapWithLv = (recipe: HerbInfo[]) => {\n  // 计算效果数量\n  const specialEffectMap = countBy(\n    recipe,\n    herb => herb.effects[herb.effects.length - 1],\n  );\n  const specialEffectMapWithLv = {} as Record<string, number>;\n  for (const [specialEffect, weight] of Object.entries(specialEffectMap)) {\n    // 药草的每个效果相当于半级\n    const effectLv = Math.floor(weight * 0.5);\n    if (effectLv < 1) {\n      // 半级效果不生效\n      continue;\n    }\n    if (specialEffect === '药水时间提升8分') {\n      const time = specialEffectMapWithLv['药水时间'] || 0;\n      // 时间提升效果最多生效一次\n      specialEffectMapWithLv['药水时间'] = time + 8;\n    }\n    if (specialEffect === '药水时间缩短7分') {\n      const time = specialEffectMapWithLv['药水时间'] || 0;\n      // 时间下降效果最多生效一次\n      specialEffectMapWithLv['药水时间'] = time - 7;\n    }\n    if (specialEffect === '药水等级提升1级') {\n      const lv = specialEffectMapWithLv['药水等级'] || 0;\n      // 等级提升效果最多生效两次\n      specialEffectMapWithLv['药水等级'] = lv + Math.min(effectLv, 2);\n    }\n    if (specialEffect === '药水等级下降1级') {\n      const lv = specialEffectMapWithLv['药水等级'] || 0;\n      // 等级下降效果最多生效两次\n      specialEffectMapWithLv['药水等级'] = lv - Math.min(effectLv, 2);\n    }\n  }\n  return specialEffectMapWithLv;\n};\n\nconst getNormalEffectMapWithLv = (recipe: HerbInfo[]) => {\n  // 计算效果数量\n  const normalEffectMap = countBy(\n    flatten(recipe.map(herb => herb.effects.slice(0, herb.effects.length - 1))),\n  );\n  const normalEffectMapWithLv = {} as Record<string, number>;\n  for (const [effectName, weight] of Object.entries(normalEffectMap)) {\n    // 药草的每个效果相当于半级\n    const effectLv = Math.floor(weight * 0.5);\n    // 半级效果不生效\n    if (effectLv < 1) {\n      continue;\n    }\n    normalEffectMapWithLv[effectName] = effectLv;\n  }\n  return normalEffectMapWithLv;\n};\n\n// 计算药草配方效果\nexport function calculateHerbRecipeEffects(herbRecipe: HerbInfo[]): Potion {\n  const specialEffectMapWithLv = getSpecialEffectMapWithLv(herbRecipe);\n  const normalEffectMapWithLv = getNormalEffectMapWithLv(herbRecipe);\n\n  const improveTime = specialEffectMapWithLv['药水时间'] || 0;\n  // TODO: 把这个时间换成偏移量\n  const potionTime = 12 + improveTime;\n  const improveLv = specialEffectMapWithLv['药水等级'] || 0;\n  const finalEffectMapWithLv = Object.keys(normalEffectMapWithLv).reduce(\n    (total, normalEffect) => {\n      // 等级下降效果至少会将效果保留1级\n      total[normalEffect] = Math.max(\n        normalEffectMapWithLv[normalEffect] + improveLv,\n        1,\n      );\n      return total;\n    },\n    {} as Record<string, number>,\n  );\n\n  return {\n    time: potionTime,\n    effects: finalEffectMapWithLv,\n  };\n}\n\nexport type ValidHerbRecipe = [HerbInfo[], Potion];\n\nconst herbSlotCount = 5;\n\nexport function findHerbRecipe(\n  targetEffects: string[] = [],\n  top = 10,\n  avoidEffects: string[] = [],\n  notice: (message: string) => void = () => undefined,\n) {\n  const aimHerbs = herbs.filter(\n    herb =>\n      herb.effects.includes('药水等级提升1级') ||\n      Boolean(intersection(targetEffects, herb.effects).length),\n  );\n  notice('startFindHerbRecipes');\n  const herbRecipes = [...combinationsWithReplacement(aimHerbs, herbSlotCount)];\n  notice('calculatePotionsEffect');\n  const herbRecipeResults = herbRecipes.map(\n    herbRecipe =>\n      [herbRecipe, calculateHerbRecipeEffects(herbRecipe)] as ValidHerbRecipe,\n  );\n  const validHerbRecipes = herbRecipeResults.filter(([_, potion]) =>\n    Object.keys(potion.effects).every(\n      potionEffect => !avoidEffects.includes(potionEffect),\n    ),\n  );\n  notice('sortValidHerbRecipes');\n  const sortedValidHerbRecipes = validHerbRecipes.sort(herbRecipeResultSorter);\n  notice('finishFindHerbRecipes');\n  return sortedValidHerbRecipes.slice(0, top);\n}\n\nexport function getHerbEffectTagSet(allHerbEffects: HerbEffect[]) {\n  const herbEffectWithTags = flatten(\n    allHerbEffects.map(herbEffect =>\n      herbEffect.tags\n        .filter(herbEffectTag =>\n          ['正面效果', '负面效果', '其他效果'].includes(herbEffectTag),\n        )\n        .map(herbTag => [herbTag, herbEffect] as [string, HerbEffect]),\n    ),\n  );\n  const herbEffectTagSet = groupBy(\n    herbEffectWithTags,\n    herbEffectWithTag => herbEffectWithTag[0],\n  );\n  return herbEffectTagSet;\n}\n\nconst targetEffectTagSortOrderMap = {\n  正面效果: 1,\n  其他效果: 2,\n  负面效果: 3,\n} as Record<string, number>;\n\nexport function targetEffectTagSorter(a: string, b: string) {\n  return (\n    (targetEffectTagSortOrderMap[a] || 0) -\n    (targetEffectTagSortOrderMap[b] || 0)\n  );\n}\n\nconst avoidEffectTagSortOrderMap = {\n  负面效果: 1,\n  其他效果: 2,\n  正面效果: 3,\n} as Record<string, number>;\n\nexport function avoidEffectTagSorter(a: string, b: string) {\n  return (\n    (avoidEffectTagSortOrderMap[a] || 0) - (avoidEffectTagSortOrderMap[b] || 0)\n  );\n}\n\nexport function herbRecipeResultSorter(a: ValidHerbRecipe, b: ValidHerbRecipe) {\n  const getPotionMaxEffectLv = (potion: Potion) =>\n    Math.max(...Object.values(potion.effects));\n  const sum = (...numbers: number[]) =>\n    numbers.reduce((total, num) => total + num, 0);\n  const getPotionAllEffectLv = (potion: Potion) =>\n    sum(...Object.values(potion.effects));\n  const potionMaxEffectDiff =\n    getPotionMaxEffectLv(b[1]) - getPotionMaxEffectLv(a[1]);\n  if (potionMaxEffectDiff !== 0) {\n    return potionMaxEffectDiff;\n  }\n  return getPotionAllEffectLv(b[1]) - getPotionAllEffectLv(a[1]);\n}\n","import { Select, Form, InputNumber, Button, Tag } from 'antd';\nimport { useState, FC } from 'react';\nimport herbEffects from '../libs/herbEffects';\nimport {\n  findHerbRecipe,\n  getHerbEffectTagSet,\n  targetEffectTagSorter,\n  avoidEffectTagSorter,\n} from '../libs/herbRecipeCalculate';\nimport type { ValidHerbRecipe } from '../libs/herbRecipeCalculate';\n\nconst { Option, OptGroup } = Select;\n\nconst layout = {\n  labelCol: { span: 6 },\n  wrapperCol: { span: 18 },\n};\nconst tailLayout = {\n  wrapperCol: { offset: 6, span: 18 },\n};\n\ninterface HerbSearchForm {\n  targetEffects: string[];\n  avoidEffects: string[];\n  topCount: number;\n}\n\ninterface HerbRecipeCalculatorProps {\n  search?: (form: HerbSearchForm) => void;\n}\n\nconst herbEffectTagSet = getHerbEffectTagSet(herbEffects);\n\n// 筛选配方 效果计算\n\nconst HerbRecipeCalculator: FC<HerbRecipeCalculatorProps> = () => {\n  // const { search } = props;\n  // TODO: 添加仅拥有药草菇选项\n  // TODO: 添加一些预设，如法师、远程、近战等\n  // TODO: 添加配方效果计算器\n  // TODO: 算法中排除药剂结果中只有负面效果的药水，或者提供一个 \"好友模式\" 的选项，整个小问号，进行对 \"好友模式\" 的说明\n  // TODO: 美化界面\n  // TODO: 高级模式，功能（暂定）：自定义排序，\"好友模式\"等\n  const [searchForm] = useState<HerbSearchForm>({\n    targetEffects: ['药水等级提升1级'],\n    avoidEffects: [],\n    topCount: 999,\n  });\n  const [form] = Form.useForm();\n  const [herbRecipeResult, setHerbRecipeResult] = useState<ValidHerbRecipe[]>(\n    [],\n  );\n  const onFinish = (values: typeof searchForm) => {\n    // eslint-disable-next-line no-console\n    console.log(values);\n    // TODO: 提供进度条显示\n    // TODO: 拆分 form 和 list 组件\n    // typeof search === 'function' && search(searchForm);\n    const herbRecipes = findHerbRecipe(\n      values.targetEffects,\n      values.topCount,\n      values.avoidEffects,\n    );\n    setHerbRecipeResult(herbRecipes);\n  };\n  const targetHerbEffectsOptions = Object.keys(herbEffectTagSet)\n    .sort(targetEffectTagSorter)\n    .map(herbEffectTag => (\n      <OptGroup key={herbEffectTag} label={herbEffectTag}>\n        {herbEffectTagSet[herbEffectTag].map(\n          ([herbTag, { name, sampleDescription }]) => (\n            <Option key={name + herbTag} value={name}>\n              {`${name} ${sampleDescription ? `[${sampleDescription}]` : ''}`}\n            </Option>\n          ),\n        )}\n      </OptGroup>\n    ));\n  const avoidHerbEffectsOptions = Object.keys(herbEffectTagSet)\n    .sort(avoidEffectTagSorter)\n    .map(herbEffectTag => (\n      <OptGroup key={herbEffectTag} label={herbEffectTag}>\n        {herbEffectTagSet[herbEffectTag].map(\n          ([herbTag, { name, sampleDescription }]) => (\n            <Option key={name + herbTag} value={name}>\n              {`${name} ${sampleDescription ? `[${sampleDescription}]` : ''}`}\n            </Option>\n          ),\n        )}\n      </OptGroup>\n    ));\n  return (\n    <div>\n      <div\n        style={{\n          margin: '0 auto',\n          width: 480,\n        }}>\n        <div>\n          <Form\n            initialValues={searchForm}\n            {...layout}\n            form={form}\n            name=\"control-hooks\"\n            onFinish={onFinish}>\n            <h2\n              style={{\n                textAlign: 'center',\n              }}>\n              药草计算器\n            </h2>\n            <div>\n              <hr />\n              作者：泪随樱花落\n              <br />\n              QQ：346014945\n              <br />\n              目前还在不断完善中（佛系更新ing），如果有什么好的建议或者发现了\n              bug，欢迎联系作者_(:з」∠)_\n              <br />\n              PS: 查找配方时会卡顿，因为配方数量比较大（取决于选择的期望的效果和排除的效果），稍等一会即可\n              <hr />\n            </div>\n            <Form.Item\n              name=\"targetEffects\"\n              label=\"期望的效果\"\n              rules={[{ required: true, message: '请选择期望的效果' }]}>\n              <Select\n                mode=\"multiple\"\n                allowClear={true}\n                tagRender={renderProps => {\n                  const { value, closable, onClose } = renderProps;\n                  return (\n                    <Tag\n                      color={'default'}\n                      onMouseDown={event => {\n                        event.preventDefault();\n                        event.stopPropagation();\n                      }}\n                      closable={closable}\n                      onClose={onClose}\n                      style={{ marginRight: 3 }}>\n                      {value}\n                    </Tag>\n                  );\n                }}>\n                {targetHerbEffectsOptions}\n              </Select>\n            </Form.Item>\n            <Form.Item name=\"avoidEffects\" label=\"排除的效果\">\n              <Select\n                mode=\"multiple\"\n                allowClear={true}\n                tagRender={renderProps => {\n                  const { value, closable, onClose } = renderProps;\n                  return (\n                    <Tag\n                      color={'default'}\n                      onMouseDown={event => {\n                        event.preventDefault();\n                        event.stopPropagation();\n                      }}\n                      closable={closable}\n                      onClose={onClose}\n                      style={{ marginRight: 3 }}>\n                      {value}\n                    </Tag>\n                  );\n                }}>\n                {avoidHerbEffectsOptions}\n              </Select>\n            </Form.Item>\n            <Form.Item name=\"topCount\" label=\"配方数量\">\n              <InputNumber min={1} keyboard={true} />\n            </Form.Item>\n            <Form.Item {...tailLayout}>\n              <Button type=\"primary\" htmlType=\"submit\">\n                查找配方\n              </Button>\n            </Form.Item>\n          </Form>\n        </div>\n        <div>\n          配方列表:\n          <ul style={{ listStyleType: 'decimal' }}>\n            {/* TODO: 做成卡片样式 */}\n            {herbRecipeResult.map(herbRecipeInfo => {\n              const [recipe, potion] = herbRecipeInfo;\n              return (\n                <li key={recipe.map(herb => herb.name).join(',')}>\n                  <div>\n                    {recipe\n                      .map(herb => herb.name)\n                      .map((herbName, index) => (\n                        // TODO: 添加点击复制效果\n                        <Tag key={herbName + String(index)}>{herbName}</Tag>\n                      ))}\n                  </div>\n                  <div>药水时间: {potion.time}</div>\n                  <div>效果</div>\n                  {Object.entries(potion.effects).map(([effect, lv]) => (\n                    <div key={effect} style={{ marginLeft: '2rem' }}>\n                      {effect}: {lv}\n                    </div>\n                  ))}\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default HerbRecipeCalculator;\n","import HerbRecipeCalculator from './components/HerbRecipeCalculator';\n\nfunction App() {\n  return (\n    <div>\n      <HerbRecipeCalculator></HerbRecipeCalculator>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'antd/dist/antd.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(console.log);\n"],"sourceRoot":""}